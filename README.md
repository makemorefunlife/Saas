<div align="center">
  <br />

  <div>
    <img src="https://img.shields.io/badge/-Next.JS_15-black?style=for-the-badge&logoColor=white&logo=nextdotjs&color=black" alt="next.js" />
    <img src="https://img.shields.io/badge/-React_19-61DAFB?style=for-the-badge&logo=react&logoColor=black" alt="react" />
    <img src="https://img.shields.io/badge/-TypeScript-3178C6?style=for-the-badge&logo=typescript&logoColor=white" alt="typescript" />
    <img src="https://img.shields.io/badge/-Tailwind_v4-06B6D4?style=for-the-badge&logo=tailwind-css&logoColor=white" alt="tailwind" />
    <img src="https://img.shields.io/badge/-Clerk-6C47FF?style=for-the-badge&logoColor=white&logo=clerk" alt="clerk" />
    <img src="https://img.shields.io/badge/-Supabase-3FCF8E?style=for-the-badge&logo=supabase&logoColor=white" alt="supabase" />
  </div>

  <h1 align="center">SaaS í…œí”Œë¦¿</h1>
  <h3 align="center">Next.js 15 + Clerk + Supabase</h3>

  <p align="center">
    í”„ë¡œë•ì…˜ ë ˆë”” SaaS ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ í’€ìŠ¤íƒ ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸
  </p>
</div>

## ğŸ“‹ ëª©ì°¨

1. [ì†Œê°œ](#ì†Œê°œ)
2. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
3. [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
4. [ì‹œì‘í•˜ê¸°](#ì‹œì‘í•˜ê¸°)
5. [ì¶”ê°€ ì„¤ì • ë° íŒ](#ì¶”ê°€-ì„¤ì •-ë°-íŒ)
6. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)

## ì†Œê°œ

Next.js 15, Clerk, Supabaseë¥¼ í™œìš©í•œ ëª¨ë˜ SaaS ì• í”Œë¦¬ì¼€ì´ì…˜ í…œí”Œë¦¿ì…ë‹ˆë‹¤.

**í•µì‹¬ íŠ¹ì§•:**
- âœ¨ Next.js 15 + React 19 ìµœì‹  ê¸°ëŠ¥ í™œìš©
- ğŸ” Clerkì™€ Supabase ë„¤ì´í‹°ë¸Œ í†µí•© (2025ë…„ ê¶Œì¥ ë°©ì‹)
- ğŸ¨ Tailwind CSS v4 + shadcn/ui
- ğŸ“± ì™„ì „í•œ ë°˜ì‘í˜• ë””ìì¸
- ğŸŒ í•œêµ­ì–´ ì§€ì› (Clerk í•œêµ­ì–´ ë¡œì»¬ë¼ì´ì œì´ì…˜)

## ê¸°ìˆ  ìŠ¤íƒ

### í”„ë ˆì„ì›Œí¬ & ë¼ì´ë¸ŒëŸ¬ë¦¬

- **[Next.js 15](https://nextjs.org/)** - React í”„ë ˆì„ì›Œí¬ (App Router, Server Components)
- **[React 19](https://react.dev/)** - UI ë¼ì´ë¸ŒëŸ¬ë¦¬
- **[TypeScript](https://www.typescriptlang.org/)** - íƒ€ì… ì•ˆì •ì„±

### ì¸ì¦ & ë°ì´í„°ë² ì´ìŠ¤

- **[Clerk](https://clerk.com/)** - ì‚¬ìš©ì ì¸ì¦ ë° ê´€ë¦¬
  - Google, ì´ë©”ì¼ ë“± ë‹¤ì–‘í•œ ë¡œê·¸ì¸ ë°©ì‹ ì§€ì›
  - í•œêµ­ì–´ UI ì§€ì›
  - Supabaseì™€ ë„¤ì´í‹°ë¸Œ í†µí•©
- **[Supabase](https://supabase.com/)** - PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  - ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”
  - Row Level Security (RLS)
  - íŒŒì¼ ìŠ¤í† ë¦¬ì§€

### UI & ìŠ¤íƒ€ì¼ë§

- **[Tailwind CSS v4](https://tailwindcss.com/)** - ìœ í‹¸ë¦¬í‹° ìš°ì„  CSS í”„ë ˆì„ì›Œí¬
- **[shadcn/ui](https://ui.shadcn.com/)** - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **[Radix UI](https://www.radix-ui.com/)** - ì ‘ê·¼ì„± ë†’ì€ í—¤ë“œë¦¬ìŠ¤ ì»´í¬ë„ŒíŠ¸
- **[lucide-react](https://lucide.dev/)** - ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬

### í¼ & ê²€ì¦

- **[React Hook Form](https://react-hook-form.com/)** - í¼ ìƒíƒœ ê´€ë¦¬
- **[Zod](https://zod.dev/)** - ìŠ¤í‚¤ë§ˆ ê²€ì¦

## ì£¼ìš” ê¸°ëŠ¥

### ğŸ” ì¸ì¦ ì‹œìŠ¤í…œ
- Clerkë¥¼ í†µí•œ ì•ˆì „í•œ ì‚¬ìš©ì ì¸ì¦
- ì†Œì…œ ë¡œê·¸ì¸ ì§€ì› (Google ë“±)
- Clerk ì‚¬ìš©ì ìë™ìœ¼ë¡œ Supabase DBì— ë™ê¸°í™”
- í•œêµ­ì–´ UI ì§€ì›

### ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ í†µí•©
- Clerk í† í° ê¸°ë°˜ Supabase ì¸ì¦ (JWT í…œí”Œë¦¿ ë¶ˆí•„ìš”)
- í™˜ê²½ë³„ Supabase í´ë¼ì´ì–¸íŠ¸ ë¶„ë¦¬:
  - Client Componentìš© (`useClerkSupabaseClient`)
  - Server Componentìš© (`createClerkSupabaseClient`)
  - ê´€ë¦¬ì ê¶Œí•œìš© (`createServiceRoleClient`)
- SQL ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œìŠ¤í…œ

### ğŸ¨ UI/UX
- shadcn/ui ê¸°ë°˜ ëª¨ë˜ ì»´í¬ë„ŒíŠ¸
- ì™„ì „í•œ ë°˜ì‘í˜• ë””ìì¸
- ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ ì§€ì› ê°€ëŠ¥
- ì ‘ê·¼ì„± ì¤€ìˆ˜ (WCAG)

### ğŸ—ï¸ ì•„í‚¤í…ì²˜
- Server Actions ìš°ì„  ì‚¬ìš©
- íƒ€ì… ì•ˆì „ì„± ë³´ì¥
- ëª¨ë“ˆí™”ëœ ì½”ë“œ êµ¬ì¡°
- Next.js 15 ìµœì‹  íŒ¨í„´ ì ìš©

## ì‹œì‘í•˜ê¸°

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

ì‹œìŠ¤í…œì— ë‹¤ìŒì´ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤:

- [Git](https://git-scm.com/)
- [Node.js](https://nodejs.org/en) (v18 ì´ìƒ)
- [pnpm](https://pnpm.io/) (ê¶Œì¥ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €)

```bash
# pnpm ì„¤ì¹˜
npm install -g pnpm
```

### í”„ë¡œì íŠ¸ ì´ˆê¸°í™”

ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìˆœì„œëŒ€ë¡œ ì§„í–‰í•˜ì„¸ìš”:

#### 1. Supabase í”„ë¡œì íŠ¸ ìƒì„±

1. [Supabase Dashboard](https://supabase.com/dashboard)ì— ì ‘ì†í•˜ì—¬ ë¡œê·¸ì¸
2. **"New Project"** í´ë¦­
3. Organization ì„ íƒ (ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±)
4. í”„ë¡œì íŠ¸ ì •ë³´ ì…ë ¥:
   - **Name**: ì›í•˜ëŠ” í”„ë¡œì íŠ¸ ì´ë¦„
   - **Database Password**: ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ ìƒì„± (ê¸°ì–µí•  í•„ìš” ì—†ìŒ, Supabaseê°€ ê´€ë¦¬)
   - **Region**: `Northeast Asia (Seoul)` ì„ íƒ (í•œêµ­ ì„œë¹„ìŠ¤ìš©)
   - **Pricing Plan**: Free ë˜ëŠ” Pro ì„ íƒ
5. **"Create new project"** í´ë¦­í•˜ê³  í”„ë¡œì íŠ¸ê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ëŒ€ê¸° (~2ë¶„)

#### 2. Clerk í”„ë¡œì íŠ¸ ìƒì„±

1. [Clerk Dashboard](https://dashboard.clerk.com/)ì— ì ‘ì†í•˜ì—¬ ë¡œê·¸ì¸
2. **"Create application"** í´ë¦­
3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ë³´ ì…ë ¥:
   - **Application name**: ì›í•˜ëŠ” ì´ë¦„ (ì˜ˆ: `SaaS Template`)
   - **Sign-in options**: Email, Google ë“± ì›í•˜ëŠ” ì¸ì¦ ë°©ì‹ ì„ íƒ
4. **"Create application"** í´ë¦­
5. Quick Start í™”ë©´ì—ì„œ **"Continue in Dashboard"** í´ë¦­

#### 3. Clerk + Supabase ë„¤ì´í‹°ë¸Œ í†µí•© ì„¤ì •

> **ì¤‘ìš”**: 2025ë…„ 4ì›”ë¶€í„° Clerkì˜ ë„¤ì´í‹°ë¸Œ Supabase í†µí•©ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. JWT Templateì€ ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šìœ¼ë©°, ì´ ë°©ë²•ì´ ê¶Œì¥ë˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

**3-1. Clerk Dashboardì—ì„œ Supabase í†µí•© í™œì„±í™”**

1. [Clerk Dashboard](https://dashboard.clerk.com/) â†’ **Setup** â†’ **Supabase** ë©”ë‰´ë¡œ ì´ë™
   - ë˜ëŠ” ì§ì ‘ [Clerk Supabase í†µí•© ì„¤ì • í˜ì´ì§€](https://dashboard.clerk.com/setup/supabase)ë¡œ ì´ë™
2. **"Activate Supabase integration"** ë²„íŠ¼ í´ë¦­
3. í†µí•© í™œì„±í™” í›„ í‘œì‹œë˜ëŠ” **Clerk domain** ë³µì‚¬
   - ì˜ˆ: `your-app-12.clerk.accounts.dev` (ì „ì²´ URLì´ ì•„ë‹Œ ë„ë©”ì¸ë§Œ)
   - ì´ ê°’ì„ ë©”ëª¨í•´ë‘ì„¸ìš” (ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì‚¬ìš©)

**3-2. Supabase Dashboardì—ì„œ Clerkë¥¼ Third-Party Auth Providerë¡œ ì¶”ê°€**

1. [Supabase Dashboard](https://supabase.com/dashboard) â†’ í”„ë¡œì íŠ¸ ì„ íƒ
2. **Settings** â†’ **Authentication** â†’ **Providers** ë©”ë‰´ë¡œ ì´ë™
3. í˜ì´ì§€ í•˜ë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ **"Third-Party Auth"** ì„¹ì…˜ ì°¾ê¸°
4. **"Add provider"** ë²„íŠ¼ í´ë¦­
5. Provider ëª©ë¡ì—ì„œ **"Clerk"** ì„ íƒ
6. ë‹¤ìŒ ì •ë³´ ì…ë ¥:
   - **Clerk domain**: 3-1 ë‹¨ê³„ì—ì„œ ë³µì‚¬í•œ Clerk domain ì…ë ¥
     ```
     your-app-12.clerk.accounts.dev
     ```
     (ì˜ˆì‹œ: `your-app-12.clerk.accounts.dev`)
7. **"Save"** ë˜ëŠ” **"Add provider"** í´ë¦­

**í†µí•© ì™„ë£Œ í™•ì¸**

í†µí•©ì´ ì„±ê³µì ìœ¼ë¡œ ì„¤ì •ë˜ë©´:
- Clerkì—ì„œ ìƒì„±í•œ ì„¸ì…˜ í† í°ì´ Supabaseì—ì„œ ìë™ìœ¼ë¡œ ì¸ì¦ë¨
- `auth.jwt()->>'sub'` í•¨ìˆ˜ë¥¼ í†µí•´ Clerk ì‚¬ìš©ì IDë¥¼ RLS ì •ì±…ì—ì„œ ì‚¬ìš© ê°€ëŠ¥
- JWT í…œí”Œë¦¿ ì„¤ì •ì´ í•„ìš” ì—†ìŒ

**ì°¸ê³  ë¬¸ì„œ:**
- [Clerk ê³µì‹ Supabase í†µí•© ê°€ì´ë“œ](https://clerk.com/docs/guides/development/integrations/databases/supabase)
- [Supabase Third-Party Auth ë¬¸ì„œ](https://supabase.com/docs/guides/auth/third-party/overview)

#### 4. Supabase Storage ìƒì„± ë° ì„¤ì •

1. Supabase Dashboard â†’ **Storage** ë©”ë‰´
2. **"New bucket"** í´ë¦­
3. ë²„í‚· ì •ë³´ ì…ë ¥:
   - **Name**: `uploads` (`.env.example`ê³¼ ë™ì¼í•˜ê²Œ)
   - **Public bucket**: í•„ìš”ì— ë”°ë¼ ì„ íƒ
     - Public: ëˆ„êµ¬ë‚˜ URLë¡œ íŒŒì¼ ì ‘ê·¼ ê°€ëŠ¥
     - Private: ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ (RLS ì •ì±… í•„ìš”)
4. **"Create bucket"** í´ë¦­

#### 5. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì ìš©

1. Supabase Dashboard â†’ **SQL Editor** ë©”ë‰´
2. **"New query"** í´ë¦­
3. `supabase/migrations/setup_schema.sql` íŒŒì¼ ë‚´ìš©ì„ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ê¸°
4. **"Run"** í´ë¦­í•˜ì—¬ ì‹¤í–‰
5. ì„±ê³µ ë©”ì‹œì§€ í™•ì¸ (`Success. No rows returned`)

**ìƒì„±ë˜ëŠ” í…Œì´ë¸” ë° ì •ì±…:**
- `users`: Clerk ì‚¬ìš©ìì™€ ë™ê¸°í™”ë˜ëŠ” ì‚¬ìš©ì ì •ë³´ í…Œì´ë¸”
- **RLS (Row Level Security) í™œì„±í™”**: Clerk JWT ê¸°ë°˜ìœ¼ë¡œ ì‚¬ìš©ìë³„ ë°ì´í„° ì ‘ê·¼ ì œì–´
  - ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ê°€ëŠ¥
  - `auth.jwt()->>'sub'` í•¨ìˆ˜ë¡œ Clerk ì‚¬ìš©ì IDë¥¼ í™•ì¸í•˜ì—¬ ê¶Œí•œ ê²€ì¦

#### 6. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

**6-1. ì €ì¥ì†Œ í´ë¡  ë° ì˜ì¡´ì„± ì„¤ì¹˜**

```bash
git clone <your-repository-url>
cd saas-template
pnpm install
```

**6-2. .env íŒŒì¼ ìƒì„±**

í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— `.env.local` íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš” (`.env`ë„ ê°€ëŠ¥í•˜ì§€ë§Œ Next.jsì—ì„œëŠ” `.env.local` ê¶Œì¥).

```bash
# .env.local íŒŒì¼ ìƒì„±
touch .env.local
```

ë˜ëŠ” Windowsì—ì„œëŠ”:
```powershell
New-Item .env.local -ItemType File
```

**6-3. Supabase í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**

1. Supabase Dashboard â†’ **Settings** â†’ **API**
2. ë‹¤ìŒ ê°’ë“¤ì„ ë³µì‚¬í•˜ì—¬ `.env.local` íŒŒì¼ì— ì…ë ¥:
   ```env
   # Supabase Project URL
   NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
   
   # Supabase Anon Key (ê³µê°œ ê°€ëŠ¥, RLSë¡œ ë³´í˜¸ë¨)
   NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx
   
   # Supabase Service Role Key (ì„œë²„ ì „ìš©, ì ˆëŒ€ ê³µê°œ ê¸ˆì§€!)
   SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx
   
   # Supabase Storage Bucket ì´ë¦„
   NEXT_PUBLIC_STORAGE_BUCKET=uploads
   ```

> **âš ï¸ ë³´ì•ˆ ì£¼ì˜ì‚¬í•­**:
> - `NEXT_PUBLIC_` ì ‘ë‘ì‚¬ê°€ ë¶™ì€ ë³€ìˆ˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ë…¸ì¶œë©ë‹ˆë‹¤
> - `SUPABASE_SERVICE_ROLE_KEY`ëŠ” ëª¨ë“  RLSë¥¼ ìš°íšŒí•˜ëŠ” ê´€ë¦¬ì ê¶Œí•œì´ë¯€ë¡œ **ì ˆëŒ€ ê³µê°œí•˜ì§€ ë§ˆì„¸ìš”!**
> - `.env.local` íŒŒì¼ì€ `.gitignore`ì— í¬í•¨ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤

**6-4. Clerk í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**

1. Clerk Dashboard â†’ **API Keys** ë©”ë‰´
2. ë‹¤ìŒ ê°’ë“¤ì„ ë³µì‚¬í•˜ì—¬ `.env.local` íŒŒì¼ì— ì…ë ¥:
   ```env
   # Clerk Publishable Key (ê³µê°œ ê°€ëŠ¥)
   NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_xxxxx
   
   # Clerk Secret Key (ì„œë²„ ì „ìš©, ì ˆëŒ€ ê³µê°œ ê¸ˆì§€!)
   CLERK_SECRET_KEY=sk_test_xxxxx
   
   # Clerk ì¸ì¦ URL ì„¤ì •
   NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
   NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
   NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/
   NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/
   NEXT_PUBLIC_CLERK_SIGN_IN_FALLBACK_REDIRECT_URL=/
   NEXT_PUBLIC_CLERK_SIGN_UP_FALLBACK_REDIRECT_URL=/
   ```

> **ì°¸ê³ **: í™˜ê²½ ë³€ìˆ˜ ì„¤ì • í›„ ê°œë°œ ì„œë²„ë¥¼ ì¬ì‹œì‘í•´ì•¼ ë³€ê²½ì‚¬í•­ì´ ì ìš©ë©ë‹ˆë‹¤.

#### 7. Cursor MCP ì„¤ì • (ì„ íƒì‚¬í•­)

> Cursor AIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, Supabase MCP ì„œë²„ë¥¼ ì„¤ì •í•˜ë©´ AIê°€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì§ì ‘ ì¡°íšŒí•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**7-1. Supabase Access Token ìƒì„±**

1. Supabase Dashboard â†’ ìš°ì¸¡ ìƒë‹¨ í”„ë¡œí•„ ì•„ì´ì½˜ í´ë¦­
2. **Account Settings** â†’ **Access Tokens**
3. **"Generate new token"** í´ë¦­
4. Token name ì…ë ¥ (ì˜ˆ: `cursor-mcp`)
5. ìƒì„±ëœ í† í° ë³µì‚¬ (ë‹¤ì‹œ ë³¼ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì•ˆì „í•œ ê³³ì— ë³´ê´€)

**7-2. .cursor/mcp.json ì„¤ì •**

`.cursor/mcp.json` íŒŒì¼ì„ ì—´ê³  `your_supabase_access_token` ë¶€ë¶„ì„ ì‹¤ì œ í† í°ìœ¼ë¡œ êµì²´:

```json
{
  "mcpServers": {
    "supabase": {
      "command": "npx",
      "args": [
        "-y",
        "@supabase/mcp-server-supabase@latest",
        "--access-token",
        "sbp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
      ]
    }
  }
}
```

**7-3. Cursor ì¬ì‹œì‘**

Cursorë¥¼ ì™„ì „íˆ ì¢…ë£Œí•˜ê³  ë‹¤ì‹œ ì‹¤í–‰í•˜ì—¬ MCP ì„œë²„ ì„¤ì •ì„ ì ìš©í•©ë‹ˆë‹¤.

#### 8. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
pnpm dev
```

ë¸Œë¼ìš°ì €ì—ì„œ [http://localhost:3000](http://localhost:3000)ì„ ì—´ì–´ í™•ì¸í•©ë‹ˆë‹¤.

**í…ŒìŠ¤íŠ¸ í˜ì´ì§€:**
- `/instruments`: Supabase ê³µì‹ ë¬¸ì„œ ì˜ˆì œ (Next.js Quickstart)
- `/auth-test`: Clerk + Supabase ì¸ì¦ í†µí•© í…ŒìŠ¤íŠ¸
- `/storage-test`: Supabase Storage ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸

### ê°œë°œ ëª…ë ¹ì–´

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰ (Turbopack)
pnpm dev

# í”„ë¡œë•ì…˜ ë¹Œë“œ
pnpm build

# í”„ë¡œë•ì…˜ ì„œë²„ ì‹¤í–‰
pnpm start

# ë¦°íŒ…
pnpm lint
```

## Clerk + Supabase í†µí•© ì‚¬ìš© ì˜ˆì œ

### Client Componentì—ì„œ Supabase ì‚¬ìš©

```tsx
'use client';

import { useClerkSupabaseClient } from '@/lib/supabase/clerk-client';
import { useUser } from '@clerk/nextjs';

export default function MyClientComponent() {
  const { user } = useUser();
  const supabase = useClerkSupabaseClient();

  async function fetchUserData() {
    if (!user) return;
    
    // Clerk JWT í† í°ì´ ìë™ìœ¼ë¡œ í¬í•¨ë˜ì–´ RLS ì •ì±…ì— ë”°ë¼ ìì‹ ì˜ ë°ì´í„°ë§Œ ì¡°íšŒ
    const { data, error } = await supabase
      .from('users')
      .select('*')
      .eq('clerk_id', user.id)
      .single();
    
    if (error) {
      console.error('Error:', error);
      return;
    }
    
    return data;
  }

  return (
    <div>
      {/* ì»´í¬ë„ŒíŠ¸ ë‚´ìš© */}
    </div>
  );
}
```

### Server Componentì—ì„œ Supabase ì‚¬ìš©

```tsx
// Supabase ê³µì‹ ë¬¸ì„œ íŒ¨í„´ ì‚¬ìš© (ê¶Œì¥)
import { createClient } from '@/lib/supabase/server';
import { auth } from '@clerk/nextjs/server';

export default async function MyServerPage() {
  const { userId } = await auth();
  
  if (!userId) {
    return <div>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</div>;
  }

  // Supabase ê³µì‹ ë¬¸ì„œì˜ í‘œì¤€ íŒ¨í„´: await createClient()
  const supabase = await createClient();
  
  // ì„œë²„ì—ì„œë„ Clerk JWT í† í°ì´ ìë™ìœ¼ë¡œ í¬í•¨ë¨
  const { data, error } = await supabase
    .from('users')
    .select('*')
    .eq('clerk_id', userId)
    .single();

  if (error) {
    throw error;
  }

  return (
    <div>
      <h1>ì•ˆë…•í•˜ì„¸ìš”, {data.name}ë‹˜!</h1>
    </div>
  );
}
```

**ì°¸ê³ :** Supabase ê³µì‹ ë¬¸ì„œì˜ í‘œì¤€ íŒ¨í„´ì„ ë”°ë¥´ë¯€ë¡œ, `/instruments` í˜ì´ì§€ ì˜ˆì œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

### Server Actionì—ì„œ Supabase ì‚¬ìš©

```tsx
'use server';

// Supabase ê³µì‹ ë¬¸ì„œ íŒ¨í„´ ì‚¬ìš© (ê¶Œì¥)
import { createClient } from '@/lib/supabase/server';
import { auth } from '@clerk/nextjs/server';

export async function updateUserName(newName: string) {
  const { userId } = await auth();
  
  if (!userId) {
    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');
  }

  // Supabase ê³µì‹ ë¬¸ì„œì˜ í‘œì¤€ íŒ¨í„´: await createClient()
  const supabase = await createClient();
  
  // RLS ì •ì±…ì— ë”°ë¼ ìì‹ ì˜ ë°ì´í„°ë§Œ ìˆ˜ì • ê°€ëŠ¥
  const { data, error } = await supabase
    .from('users')
    .update({ name: newName })
    .eq('clerk_id', userId)
    .select()
    .single();

  if (error) {
    throw error;
  }

  return data;
}
```

## ì¶”ê°€ ì„¤ì • ë° íŒ

### Clerk í•œêµ­ì–´ ë¡œì»¬ë¼ì´ì œì´ì…˜ ì„¤ì •

í”„ë¡œì íŠ¸ì— ì´ë¯¸ Clerk í•œêµ­ì–´ ë¡œì»¬ë¼ì´ì œì´ì…˜ì´ ì ìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤. `app/layout.tsx`ì˜ `ClerkProvider`ì—ì„œ `koKR` localeì´ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

**í˜„ì¬ ì„¤ì •:**

```tsx
// app/layout.tsx
import { ClerkProvider } from "@clerk/nextjs";
import { koKR } from "@clerk/localizations";

export default function RootLayout({ children }) {
  return (
    <ClerkProvider localization={koKR}>
      <html lang="ko">
        {/* ... */}
      </html>
    </ClerkProvider>
  );
}
```

**ì ìš©ë˜ëŠ” ë‚´ìš©:**

- âœ… ëª¨ë“  Clerk ì»´í¬ë„ŒíŠ¸ì˜ í…ìŠ¤íŠ¸ê°€ í•œêµ­ì–´ë¡œ í‘œì‹œë©ë‹ˆë‹¤
  - ë¡œê·¸ì¸, íšŒì›ê°€ì… í¼
  - í”„ë¡œí•„ ê´€ë¦¬ í˜ì´ì§€
  - ì—ëŸ¬ ë©”ì‹œì§€
  - ë²„íŠ¼ ë° ë¼ë²¨ í…ìŠ¤íŠ¸

**ì°¸ê³  ì‚¬í•­:**

- âš ï¸ Clerk Account Portal (í˜¸ìŠ¤íŒ…ëœ ì‚¬ìš©ì ê´€ë¦¬ í˜ì´ì§€)ëŠ” ì—¬ì „íˆ ì˜ì–´ë¡œ í‘œì‹œë©ë‹ˆë‹¤
- âš ï¸ ì´ ê¸°ëŠ¥ì€ í˜„ì¬ ì‹¤í—˜ì (experimental) ê¸°ëŠ¥ì…ë‹ˆë‹¤. ë¬¸ì œê°€ ë°œìƒí•˜ë©´ [Clerk ì§€ì›íŒ€](https://clerk.com/support)ì— ë¬¸ì˜í•˜ì„¸ìš”

**ì»¤ìŠ¤í…€ ë¡œì»¬ë¼ì´ì œì´ì…˜ ì‚¬ìš©:**

íŠ¹ì • í…ìŠ¤íŠ¸ë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ë ¤ë©´ `lib/clerk/localization.ts` íŒŒì¼ì„ ì°¸ê³ í•˜ì„¸ìš”:

```tsx
// app/layout.tsx
import { customKoKR } from '@/lib/clerk/localization';

<ClerkProvider localization={customKoKR}>
  {/* ... */}
</ClerkProvider>
```

**ì§€ì›ë˜ëŠ” ì–¸ì–´:**

ClerkëŠ” 50ê°œ ì´ìƒì˜ ì–¸ì–´ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. í•œêµ­ì–´ ì™¸ì— ë‹¤ë¥¸ ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´:

```tsx
import { enUS, jaJP, zhCN } from '@clerk/localizations';

// ì˜ì–´
<ClerkProvider localization={enUS}>

// ì¼ë³¸ì–´
<ClerkProvider localization={jaJP}>

// ì¤‘êµ­ì–´ (ê°„ì²´)
<ClerkProvider localization={zhCN}>
```

**ì°¸ê³  ë¬¸ì„œ:**

- [Clerk ë¡œì»¬ë¼ì´ì œì´ì…˜ ê³µì‹ ë¬¸ì„œ](https://clerk.com/docs/guides/customizing-clerk/localization)
- [ì§€ì›ë˜ëŠ” ì–¸ì–´ ëª©ë¡](https://clerk.com/docs/guides/customizing-clerk/localization#languages)

### Supabase RLS (Row Level Security) ì •ì±…

í”„ë¡œì íŠ¸ì˜ `users` í…Œì´ë¸”ì—ëŠ” **Clerk JWT ê¸°ë°˜ RLS ì •ì±…**ì´ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

- **SELECT**: ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ì¡°íšŒ ê°€ëŠ¥ (`clerk_id = auth.jwt()->>'sub'`)
- **INSERT**: ìì‹ ì˜ Clerk IDì™€ ì¼ì¹˜í•˜ëŠ” ë ˆì½”ë“œë§Œ ìƒì„± ê°€ëŠ¥
- **UPDATE**: ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ìˆ˜ì • ê°€ëŠ¥
- **DELETE**: ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ì‚­ì œ ê°€ëŠ¥

**Clerk JWTì—ì„œ ì‚¬ìš©ì ID ê°€ì ¸ì˜¤ê¸°:**

Clerk í†µí•©ì„ í†µí•´ SupabaseëŠ” Clerk ì„¸ì…˜ í† í°ì„ ìë™ìœ¼ë¡œ ê²€ì¦í•©ë‹ˆë‹¤. RLS ì •ì±…ì—ì„œ `auth.jwt()->>'sub'` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ Clerk ì‚¬ìš©ì IDë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```sql
-- ì˜ˆì‹œ: Clerk JWTì˜ 'sub' í´ë ˆì„ì—ì„œ ì‚¬ìš©ì ID ì¶”ì¶œ
SELECT auth.jwt()->>'sub' AS clerk_user_id;
```

**ì¶”ê°€ í…Œì´ë¸” ìƒì„± ì‹œ RLS ì •ì±… ì„¤ì • ì˜ˆì‹œ:**

```sql
-- í…Œì´ë¸” ìƒì„± (Clerk IDë¥¼ user_idë¡œ ì €ì¥)
CREATE TABLE your_table (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id TEXT NOT NULL,  -- Clerk ì‚¬ìš©ì ID ì €ì¥
  title TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT now() NOT NULL
);

-- RLS í™œì„±í™”
ALTER TABLE your_table ENABLE ROW LEVEL SECURITY;

-- SELECT ì •ì±…: ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ì¡°íšŒ
CREATE POLICY "Users can view their own data"
  ON your_table FOR SELECT
  TO authenticated
  USING (auth.jwt()->>'sub' = user_id);

-- INSERT ì •ì±…: ìì‹ ì˜ Clerk IDë¡œë§Œ ë ˆì½”ë“œ ìƒì„± ê°€ëŠ¥
CREATE POLICY "Users can insert their own data"
  ON your_table FOR INSERT
  TO authenticated
  WITH CHECK (auth.jwt()->>'sub' = user_id);

-- UPDATE ì •ì±…: ìì‹ ì˜ ë°ì´í„°ë§Œ ìˆ˜ì • ê°€ëŠ¥
CREATE POLICY "Users can update their own data"
  ON your_table FOR UPDATE
  TO authenticated
  USING (auth.jwt()->>'sub' = user_id)
  WITH CHECK (auth.jwt()->>'sub' = user_id);

-- DELETE ì •ì±…: ìì‹ ì˜ ë°ì´í„°ë§Œ ì‚­ì œ ê°€ëŠ¥
CREATE POLICY "Users can delete their own data"
  ON your_table FOR DELETE
  TO authenticated
  USING (auth.jwt()->>'sub' = user_id);
```

**ëª¨ë²” ì‚¬ë¡€:**

1. ëª¨ë“  ì‚¬ìš©ì ë°ì´í„° í…Œì´ë¸”ì— RLSë¥¼ í™œì„±í™”í•˜ì„¸ìš”
2. `auth.jwt()->>'sub'`ë¥¼ ì‚¬ìš©í•˜ì—¬ Clerk ì‚¬ìš©ì IDë¥¼ í™•ì¸í•˜ì„¸ìš”
3. INSERT ì •ì±…ì—ëŠ” `WITH CHECK`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„° ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ì„¸ìš”
4. í”„ë¡œë•ì…˜ ë°°í¬ ì „ì— RLS ì •ì±…ì„ ì¶©ë¶„íˆ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”

### ì¶”ê°€ ë¡œê·¸ì¸ ë°©ì‹ ì„¤ì •

Clerkì—ì„œ ì¶”ê°€ ë¡œê·¸ì¸ ë°©ì‹ì„ í™œì„±í™”í•˜ë ¤ë©´:

1. Clerk Dashboard â†’ **User & Authentication** â†’ **Social Connections**
2. ì›í•˜ëŠ” ì œê³µì ì„ íƒ (Google, GitHub, Discord ë“±)
3. OAuth ìê²© ì¦ëª… ì…ë ¥ (ì œê³µì ê°œë°œì ì½˜ì†”ì—ì„œ ìƒì„±)
4. **Enable** í´ë¦­

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
saas-template/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ api/               # API Routes
â”‚   â”‚   â””â”€â”€ sync-user/    # Clerk â†’ Supabase ì‚¬ìš©ì ë™ê¸°í™”
â”‚   â”œâ”€â”€ auth-test/        # ì¸ì¦ í…ŒìŠ¤íŠ¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ storage-test/     # ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ layout.tsx        # Root Layout (Clerk Provider)
â”‚   â”œâ”€â”€ page.tsx          # í™ˆí˜ì´ì§€
â”‚   â””â”€â”€ globals.css       # ì „ì—­ ìŠ¤íƒ€ì¼ (Tailwind v4 ì„¤ì •)
â”‚
â”œâ”€â”€ components/            # React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ui/               # shadcn/ui ì»´í¬ë„ŒíŠ¸ (ìë™ ìƒì„±)
â”‚   â”œâ”€â”€ providers/        # Context Providers
â”‚   â”‚   â””â”€â”€ sync-user-provider.tsx
â”‚   â””â”€â”€ Navbar.tsx        # ë„¤ë¹„ê²Œì´ì…˜ ë°”
â”‚
â”œâ”€â”€ lib/                   # ìœ í‹¸ë¦¬í‹° ë° ì„¤ì •
â”‚   â”œâ”€â”€ supabase/         # Supabase í´ë¼ì´ì–¸íŠ¸ë“¤
â”‚   â”‚   â”œâ”€â”€ clerk-client.ts    # Client Componentìš©
â”‚   â”‚   â”œâ”€â”€ server.ts          # Server Componentìš©
â”‚   â”‚   â”œâ”€â”€ service-role.ts    # ê´€ë¦¬ììš©
â”‚   â”‚   â””â”€â”€ client.ts          # ê³µê°œ ë°ì´í„°ìš©
â”‚   â””â”€â”€ utils.ts          # ê³µí†µ ìœ í‹¸ë¦¬í‹° (cn í•¨ìˆ˜ ë“±)
â”‚
â”œâ”€â”€ hooks/                 # Custom React Hooks
â”‚   â””â”€â”€ use-sync-user.ts  # ì‚¬ìš©ì ë™ê¸°í™” í›…
â”‚
â”œâ”€â”€ supabase/             # Supabase ê´€ë ¨ íŒŒì¼
â”‚   â”œâ”€â”€ migrations/       # ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â”‚   â””â”€â”€ schema.sql   # ì´ˆê¸° ìŠ¤í‚¤ë§ˆ
â”‚   â””â”€â”€ config.toml       # Supabase í”„ë¡œì íŠ¸ ì„¤ì •
â”‚
â”œâ”€â”€ .cursor/              # Cursor AI ê·œì¹™
â”‚   â””â”€â”€ rules/           # ê°œë°œ ì»¨ë²¤ì…˜ ë° ê°€ì´ë“œ
â”‚
â”œâ”€â”€ middleware.ts         # Next.js ë¯¸ë“¤ì›¨ì–´ (Clerk)
â”œâ”€â”€ .env.example         # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â””â”€â”€ CLAUDE.md            # AI ì—ì´ì „íŠ¸ìš© í”„ë¡œì íŠ¸ ê°€ì´ë“œ
```

### ì£¼ìš” íŒŒì¼ ì„¤ëª…

- **`middleware.ts`**: Clerk ì¸ì¦ ë¯¸ë“¤ì›¨ì–´ ì„¤ì •
- **`app/layout.tsx`**: ClerkProviderì™€ SyncUserProvider ì„¤ì •
- **`lib/supabase/`**: í™˜ê²½ë³„ Supabase í´ë¼ì´ì–¸íŠ¸ (ë§¤ìš° ì¤‘ìš”!)
- **`hooks/use-sync-user.ts`**: Clerk ì‚¬ìš©ìë¥¼ Supabaseì— ìë™ ë™ê¸°í™”
- **`components/providers/sync-user-provider.tsx`**: ì•± ì „ì—­ì—ì„œ ì‚¬ìš©ì ë™ê¸°í™” ì‹¤í–‰
- **`CLAUDE.md`**: Claude Codeë¥¼ ìœ„í•œ í”„ë¡œì íŠ¸ ê°€ì´ë“œ

## ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- [Next.js 15 ë¬¸ì„œ](https://nextjs.org/docs)
- [Clerk ë¬¸ì„œ](https://clerk.com/docs)
- [Supabase ë¬¸ì„œ](https://supabase.com/docs)
- [shadcn/ui ë¬¸ì„œ](https://ui.shadcn.com/)
- [Tailwind CSS v4 ë¬¸ì„œ](https://tailwindcss.com/docs)
